<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>F:\Documents\faculta\MyDocAppointment\MyDocAppointment.Infrastructure\Migrations\20221219221533_AddDrugStocksTable.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using System;
using Microsoft.EntityFrameworkCore.Migrations;

#nullable disable

namespace MyDocAppointment.Infrastructure.Migrations
{
    /// &lt;inheritdoc /&gt;
    public partial class AddDrugStocksTable : Migration
    {
        /// &lt;inheritdoc /&gt;
        protected override void Up(MigrationBuilder migrationBuilder)
        {
            migrationBuilder.DropForeignKey(
                name: &quot;FK_Appointments_Payments_PaymentId&quot;,
                table: &quot;Appointments&quot;);

            migrationBuilder.AlterColumn&lt;Guid&gt;(
                name: &quot;PaymentId&quot;,
                table: &quot;Appointments&quot;,
                type: &quot;uniqueidentifier&quot;,
                nullable: true,
                oldClrType: typeof(Guid),
                oldType: &quot;uniqueidentifier&quot;);

            migrationBuilder.CreateTable(
                name: &quot;DrugStocks&quot;,
                columns: table =&gt; new
                {
                    Id = table.Column&lt;Guid&gt;(type: &quot;uniqueidentifier&quot;, nullable: false),
                    ItemId = table.Column&lt;Guid&gt;(type: &quot;uniqueidentifier&quot;, nullable: false),
                    Quantity = table.Column&lt;int&gt;(type: &quot;int&quot;, nullable: false),
                    IsRestricted = table.Column&lt;bool&gt;(type: &quot;bit&quot;, nullable: false)
                },
                constraints: table =&gt;
                {
                    table.PrimaryKey(&quot;PK_DrugStocks&quot;, x =&gt; x.Id);
                    table.ForeignKey(
                        name: &quot;FK_DrugStocks_Drugs_ItemId&quot;,
                        column: x =&gt; x.ItemId,
                        principalTable: &quot;Drugs&quot;,
                        principalColumn: &quot;Id&quot;,
                        onDelete: ReferentialAction.Cascade);
                });

            migrationBuilder.CreateIndex(
                name: &quot;IX_DrugStocks_ItemId&quot;,
                table: &quot;DrugStocks&quot;,
                column: &quot;ItemId&quot;);

            migrationBuilder.AddForeignKey(
                name: &quot;FK_Appointments_Payments_PaymentId&quot;,
                table: &quot;Appointments&quot;,
                column: &quot;PaymentId&quot;,
                principalTable: &quot;Payments&quot;,
                principalColumn: &quot;Id&quot;);
        }

        /// &lt;inheritdoc /&gt;
        protected override void Down(MigrationBuilder migrationBuilder)
        {
            migrationBuilder.DropForeignKey(
                name: &quot;FK_Appointments_Payments_PaymentId&quot;,
                table: &quot;Appointments&quot;);

            migrationBuilder.DropTable(
                name: &quot;DrugStocks&quot;);

            migrationBuilder.AlterColumn&lt;Guid&gt;(
                name: &quot;PaymentId&quot;,
                table: &quot;Appointments&quot;,
                type: &quot;uniqueidentifier&quot;,
                nullable: false,
                defaultValue: new Guid(&quot;00000000-0000-0000-0000-000000000000&quot;),
                oldClrType: typeof(Guid),
                oldType: &quot;uniqueidentifier&quot;,
                oldNullable: true);

            migrationBuilder.AddForeignKey(
                name: &quot;FK_Appointments_Payments_PaymentId&quot;,
                table: &quot;Appointments&quot;,
                column: &quot;PaymentId&quot;,
                principalTable: &quot;Payments&quot;,
                principalColumn: &quot;Id&quot;,
                onDelete: ReferentialAction.Cascade);
        }
    }
}

    </pre>
    <script type="text/javascript">
      highlightRanges([[13,9,13,10,0],[14,13,16,40,0],[18,13,24,46,0],[26,13,28,35,0],[28,35,34,18,0],[34,18,36,17,0],[36,17,36,18,0],[36,18,37,21,0],[37,21,37,66,0],[37,66,38,21,0],[38,21,43,62,0],[43,62,44,17,0],[44,17,44,18,0],[44,18,44,20,0],[46,13,49,35,0],[51,13,56,40,0],[57,9,57,10,0],[61,9,61,10,0],[62,13,64,40,0],[66,13,67,37,0],[69,13,77,36,0],[79,13,85,54,0],[86,9,86,10,0]]);
    </script>
  </body>
</html>