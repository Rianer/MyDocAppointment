<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>E:\repo2\MyDocAppointment\MyDocAppointment.IntegrationTests\DoctorsControllerTests.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using MyDocAppointment.API.Dtos;
using System.Net.Http.Json;

namespace MyDocAppointment.IntegrationTests
{
    public class DoctorsControllerTests : BaseIntegrationTests
    {
        private const string ApiUrl = &quot;api/v1/doctor&quot;;

        [Fact]
        public async void WhenCreateDoctor_ThenShouldReturnCreated()
        {
            //Arange
            var doctorDto = getDoctorDto();

            //Act
            var doctorResponse = await HttpClient.PostAsJsonAsync(ApiUrl, doctorDto);
            var getDoctorgResult = await HttpClient.GetAsync(ApiUrl);
            var status = ((int)doctorResponse.StatusCode);

            //Assert
            doctorResponse.EnsureSuccessStatusCode();
            Assert.Equal(200, status);
        }

        [Fact]
        public async Task Get_WhenCalled_ReturnsOk()
        {
            //Act
            var response = await HttpClient.GetAsync(ApiUrl);
            //Assert
            response.EnsureSuccessStatusCode();
        }

        [Fact]
        public async Task Index_WhenCalled_ReturnsApplicationForm()
        {
            var response = await HttpClient.GetAsync(ApiUrl);
            response.EnsureSuccessStatusCode();
            var responseString = await response.Content.ReadAsStringAsync();
            //Assert.Contains(&quot;Ion&quot;, responseString);
            Assert.Contains(&quot;Mark&quot;, responseString);
        }

        [Fact]
        public async Task Create_WhenCalled_ReturnsCreateForm()
        {
            var response = await HttpClient.GetAsync(ApiUrl);
            response.EnsureSuccessStatusCode();
            var responseString = await response.Content.ReadAsStringAsync();

            Assert.Contains(&quot;Stan&quot;, responseString);
        }

        /*[Fact]
        public async Task DefaultRoute_ReturnsNothing()
        {
            var response = await HttpClient.GetAsync(&quot;&quot;);
            response.EnsureSuccessStatusCode();
            var responseString = await response.Content.ReadAsStringAsync();

            Assert.Equal(&quot;&quot;, responseString);
        }*/

        private CreateDoctorDto getDoctorDto()
        {
            var doctorDto = new CreateDoctorDto
            {
                Name = &quot;Stan&quot;,
                Surname = &quot;Mark&quot;,
                Age = 30,
                Gender = &quot;Male&quot;,
                EmailAddress = &quot;ion@gmail.com&quot;,
                PhoneNumber = &quot;0777777777&quot;,
                HomeAddress = &quot;Iasi&quot;,
                Speciality = &quot;Cardiology&quot;

            };

            return doctorDto;
        }
    }
}

    </pre>
    <script type="text/javascript">
      highlightRanges([[12,9,12,10,1],[14,13,14,44,1],[17,13,17,86,1],[18,13,18,70,1],[19,13,19,59,1],[22,13,22,54,1],[23,13,23,39,1],[24,9,24,10,1],[28,9,28,10,1],[30,13,30,62,1],[32,13,32,48,1],[33,9,33,10,1],[37,9,37,10,1],[38,13,38,62,1],[39,13,39,48,1],[40,13,40,77,1],[42,13,42,53,1],[43,9,43,10,1],[47,9,47,10,1],[48,13,48,62,1],[49,13,49,48,1],[50,13,50,77,1],[52,13,52,53,1],[53,9,53,10,1],[66,9,66,10,1],[67,13,78,15,1],[80,13,80,30,1],[81,9,81,10,1]]);
    </script>
  </body>
</html>